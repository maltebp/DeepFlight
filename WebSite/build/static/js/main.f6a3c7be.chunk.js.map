{"version":3,"sources":["images/screenshot.jpg","Home.js","Login.js","Download.js","About.js","Main.js","index.js"],"names":["module","exports","Home","props","state","universal","lastRound","url","axios","method","headers","localStorage","getItem","withCredentials","then","response","console","log","scores","data","planets","setState","name","color","catch","error","className","this","Component","Login","password","loginErrors","loading","handleSubmit","bind","handleChange","handleParentState","handleState","event","target","value","username","bodyFormData","FormData","append","token","jwt","decoded","decode","setItem","preventDefault","message","onSubmit","type","placeholder","defaultValue","onChange","required","Download","FilterDownload","today","Date","exp","DownloadBox","href","React","About","src","screenshot","width","alt","Main","exact","to","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f6a3c7be.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/screenshot.1d367245.jpg\";","import React, { Component } from \"react\";\nimport axios from 'axios';\n//import jwt from 'jsonwebtoken';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      universal: [\n        'Loading high scores...',\n        null,\n        null,\n        null,\n        null,\n      ],\n      lastRound: [\n        null,\n        null,\n        null,\n        null,\n        null,\n      ]\n    }\n  }\n\n  componentDidMount() {\n    const url = \"http://maltebp.dk:10000/gameapi/round/current\";\n    axios({\n      method: 'get',\n      url: url,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': url,\n        'Accept': 'application/json',\n        'Authorization': localStorage.getItem(\"dftoken\")\n      },\n      withCredentials: true\n    })\n      .then(response => {\n        console.log(response);\n        const scores = response.data.planets;\n        console.log(scores);\n        this.setState({\n          universal: [scores[0].name, scores[1].name, scores[2].name, scores[3].name],\n          lastRound: [scores[0].color, scores[1].color, scores[2].color, scores[3].color]\n        });\n      })\n      .catch(error => {\n        console.log(\"axios download results error\", error);\n      });\n  }\n\n\n  render() {\n    return (\n      <div className=\"boxwrapper\">\n        <div className=\"box whitebg\">\n          <h1>Universal ratings (top 5)</h1>\n          <table>\n            <tbody>\n              <tr><td>{this.state.universal[0]}</td><td>{this.state.lastRound[0]}</td></tr>\n              <tr><td>{this.state.universal[1]}</td><td>{this.state.lastRound[1]}</td></tr>\n              <tr><td>{this.state.universal[2]}</td><td>{this.state.lastRound[2]}</td></tr>\n              <tr><td>{this.state.universal[3]}</td><td>{this.state.lastRound[3]}</td></tr>\n            </tbody>\n          </table>\n            </div>\n        <div className=\"box whitebg\">\n            <h1 >Last round ratings (top 5)</h1>\n            <table>\n              <tbody>\n                <tr><td>{this.state.universal[0]}</td><td>{this.state.lastRound[0]}</td></tr>\n                <tr><td>{this.state.universal[1]}</td><td>{this.state.lastRound[1]}</td></tr>\n                <tr><td>{this.state.universal[2]}</td><td>{this.state.lastRound[2]}</td></tr>\n                <tr><td>{this.state.universal[3]}</td><td>{this.state.lastRound[3]}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default Home;\n","import React, { Component } from \"react\";\nimport axios from 'axios';\nimport jwt from 'jsonwebtoken';\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            name: \"\",\n            password: \"\",\n            loginErrors: \"\",\n            loading: false,\n        };\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleParentState = this.props.handleState; // Updates state in parent\n    }\n\n    handleChange(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n    handleSubmit(event) {\n        const { username, password } = this.state;\n        var bodyFormData = new FormData();\n        bodyFormData.append('name', username);\n        bodyFormData.append('password', password);\n\n        axios({\n            method: 'post',\n            url: 'http://maltebp.dk:7000/login',\n            //url: 'http://localhost:7000/login',\n            data: bodyFormData,\n            headers: {\n                'Content-Type': 'multipart/form-data',\n                'Access-Control-Allow-Origin': 'http://maltebp.dk:7000/login'\n                //'Access-Control-Allow-Origin': 'http://localhost:7000/login'\n            },\n            withCredentials: true\n        })\n\n            .then(response => {\n                this.state.loading = true;\n                this.handleChange();\n                const token = response.data.jwt;\n                var decoded = jwt.decode(token);\n                console.log(decoded);\n                //alert(jwt.decode(token.jwt));\n                //var result = JSON.stringify(response.statusText) + \"\\nJWT:\\n\" + JSON.stringify(decoded).replace(/\\\\/g, \"\");\n                //if (response.data.logged_in) {\n                //this.props.handleSuccessfulAuth(response.data);\n                //}\n                localStorage.setItem(\"dftoken\", token);\n                //console.log(\"Token in child \" + token);\n                console.log(\"Read from localStorage: \\n\" + localStorage.getItem(\"dftoken\"));\n                this.handleParentState();\n                this.state.loading = false;\n                this.handleChange();\n            })\n            .catch(error => {\n                console.log(\"axios login error\", error);\n            });\n        event.preventDefault();\n    }\n\n    render() {\n        const {loading} = this.state.loading;\n        if (loading){console.log(\"loading\")} else {\n            console.log(\"NOT loading\");\n        }\n        return (\n            <div className=\"box\">\n                <h2>Login</h2>\n                <p>{this.props.message}</p>\n                <form onSubmit={this.handleSubmit}>\n                    <input\n                        type=\"text\"\n                        name=\"username\"\n                        placeholder=\"Username\"\n                        defaultValue={this.state.username}\n                        onChange={this.handleChange}\n                        required\n                    />\n\n                    <input\n                        type=\"password\"\n                        name=\"password\"\n                        placeholder=\"Password\"\n                        value={this.state.password}\n                        onChange={this.handleChange}\n                        required\n                    />\n                    { this.state.loading && <p>Loading...</p>}\n                    <button type=\"Login\">Login</button>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default Login;","import React, { Component } from \"react\";\nimport Login from './Login';\nimport jwt from 'jsonwebtoken';\n\nclass Download extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: localStorage.getItem(\"dftoken\"),\n    }\n  }\n\n  handleState() {\n    this.setState({\n      token: localStorage.getItem(\"dftoken\"),\n    })\n    //console.log(\"Handlin' state\");\n    //console.log(\"Token in Parent: \" + JSON.stringify(this.state.token))\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"boxwrapper longread\">\n          <FilterDownload token={this.state.token} handleState={this.handleState.bind(this)} />\n          <div className=\"box whitebg\">\n            <h2>Installation</h2>\n            <h3>Windows</h3>\n            <p>Instructions</p>\n            <h3>Mac</h3>\n            <p>Instructions</p>\n            <h3>Linux</h3>\n            <p>Instructions</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n// Show the login menu of the user has no token\n// Show download text box if logged in\nfunction FilterDownload(props) {\n  const token = props.token;\n  const today = new Date();\n  //console.log(\"Token in FilterDownload: \" + JSON.stringify(token));\n  if (token === null\n    || token === 'undefined') {\n    return (<Login handleState={props.handleState} message=\"Login to download game\"/>); // Pass method to handle state as props\n  } else if (today > new Date(jwt.decode(token).exp * 1000)){ // jwt deals in seconds, so * 1000\n    return (<Login handleState={props.handleState} message=\"Session expired. Log in again\"/>); // Pass method to handle state as props\n  } else {\n    return (<DownloadBox />)\n  }\n}\n\nclass DownloadBox extends React.Component {\n  DownloadGame() {\n    console.log(\"Starting download\")\n  }\n  render() {\n    return (\n      <div className=\"box\">\n        <h2>Hello, user!</h2>\n        <p>You are logged in and can download the game from here.</p>\n        <p>Just a dummy file, no need to install it :-)</p>\n        <a className=\"buttonLink\" href=\"http://mirrors.dotsrc.org/linuxmint-cd/stable/19.3/linuxmint-19.3-cinnamon-64bit.iso\">Download Deep Flight</a>\n        <p>Size: 8 MB</p>\n      </div>\n    );\n  }\n}\n\nexport default Download;","import React, { Component } from \"react\";\nimport screenshot from \"./images/screenshot.jpg\";\n\nclass About extends Component {\n  render() {\n    return (\n      <div>\n        <div className=\"boxwrapper longread\">\n          <div className=\"box\">\n            <img src={screenshot} width=\"100%\" alt=\"deep flight screenshot\" className=\"headerimage\" />\n            <div className=\"imageoverlay\"><h1 >Deep Flight</h1>\n              <p>Classic cave flier with an infinite number of caves</p>\n            </div>\n            <h2>Project</h2>\n              <p>This page and the backend is made by <b>gruppe 0, DTU software, Backendudvikling, may 2020</b>. </p>\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default About;","import React, { Component } from \"react\";\nimport {\n  Route,\n  NavLink,\n  HashRouter\n} from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Download from \"./Download\";\nimport About from \"./About\";\n\nclass Main extends Component {\n  render() {\n    return (\n      <HashRouter>\n        <div>\n          <h1 className=\"header\">DEEP FLIGHT</h1>\n          <ul className=\"header\">\n            <li><NavLink exact to=\"/\">High Scores</NavLink></li>\n            <li><NavLink to=\"/download\">Download</NavLink></li>\n            <li><NavLink to=\"/about\">About the game</NavLink></li>\n          </ul>\n          <div className=\"content\">\n          <Route exact path=\"/\" component={Home}/>\n         <Route path=\"/download\" component={Download}/>\n         <Route path=\"/about\" component={About}/>\n          </div>\n        </div>\n        </HashRouter>\n    );\n  }\n}\n\nexport default Main;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Main from \"./Main\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <Main/>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}