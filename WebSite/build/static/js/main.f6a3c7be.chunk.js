(this["webpackJsonpdeep-flight"]=this["webpackJsonpdeep-flight"]||[]).push([[0],{120:function(e,t,a){e.exports=a.p+"static/media/screenshot.1d367245.jpg"},123:function(e,t,a){e.exports=a(249)},147:function(e,t){},149:function(e,t){},187:function(e,t){},188:function(e,t){},248:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(118),o=a.n(r),c=a(12),s=a(13),i=a(15),u=a(14),m=a(34),d=a(20),h=a(42),p=a.n(h),E=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={universal:["Loading high scores...",null,null,null,null],lastRound:[null,null,null,null,null]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="http://maltebp.dk:10000/gameapi/round/current";p()({method:"get",url:t,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":t,Accept:"application/json",Authorization:localStorage.getItem("dftoken")},withCredentials:!0}).then((function(t){console.log(t);var a=t.data.planets;console.log(a),e.setState({universal:[a[0].name,a[1].name,a[2].name,a[3].name],lastRound:[a[0].color,a[1].color,a[2].color,a[3].color]})})).catch((function(e){console.log("axios download results error",e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"boxwrapper"},l.a.createElement("div",{className:"box whitebg"},l.a.createElement("h1",null,"Universal ratings (top 5)"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,this.state.universal[0]),l.a.createElement("td",null,this.state.lastRound[0])),l.a.createElement("tr",null,l.a.createElement("td",null,this.state.universal[1]),l.a.createElement("td",null,this.state.lastRound[1])),l.a.createElement("tr",null,l.a.createElement("td",null,this.state.universal[2]),l.a.createElement("td",null,this.state.lastRound[2])),l.a.createElement("tr",null,l.a.createElement("td",null,this.state.universal[3]),l.a.createElement("td",null,this.state.lastRound[3]))))),l.a.createElement("div",{className:"box whitebg"},l.a.createElement("h1",null,"Last round ratings (top 5)"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,this.state.universal[0]),l.a.createElement("td",null,this.state.lastRound[0])),l.a.createElement("tr",null,l.a.createElement("td",null,this.state.universal[1]),l.a.createElement("td",null,this.state.lastRound[1])),l.a.createElement("tr",null,l.a.createElement("td",null,this.state.universal[2]),l.a.createElement("td",null,this.state.lastRound[2])),l.a.createElement("tr",null,l.a.createElement("td",null,this.state.universal[3]),l.a.createElement("td",null,this.state.lastRound[3]))))))}}]),a}(n.Component),g=a(119),b=a(33),v=a(43),f=a.n(v),w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={name:"",password:"",loginErrors:"",loading:!1},n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n.handleChange=n.handleChange.bind(Object(b.a)(n)),n.handleParentState=n.props.handleState,n}return Object(s.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this,a=this.state,n=a.username,l=a.password,r=new FormData;r.append("name",n),r.append("password",l),p()({method:"post",url:"http://maltebp.dk:7000/login",data:r,headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"http://maltebp.dk:7000/login"},withCredentials:!0}).then((function(e){t.state.loading=!0,t.handleChange();var a=e.data.jwt,n=f.a.decode(a);console.log(n),localStorage.setItem("dftoken",a),console.log("Read from localStorage: \n"+localStorage.getItem("dftoken")),t.handleParentState(),t.state.loading=!1,t.handleChange()})).catch((function(e){console.log("axios login error",e)})),e.preventDefault()}},{key:"render",value:function(){return this.state.loading.loading?console.log("loading"):console.log("NOT loading"),l.a.createElement("div",{className:"box"},l.a.createElement("h2",null,"Login"),l.a.createElement("p",null,this.props.message),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{type:"text",name:"username",placeholder:"Username",defaultValue:this.state.username,onChange:this.handleChange,required:!0}),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0}),this.state.loading&&l.a.createElement("p",null,"Loading..."),l.a.createElement("button",{type:"Login"},"Login")))}}]),a}(n.Component),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={token:localStorage.getItem("dftoken")},n}return Object(s.a)(a,[{key:"handleState",value:function(){this.setState({token:localStorage.getItem("dftoken")})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"boxwrapper longread"},l.a.createElement(k,{token:this.state.token,handleState:this.handleState.bind(this)}),l.a.createElement("div",{className:"box whitebg"},l.a.createElement("h2",null,"Installation"),l.a.createElement("h3",null,"Windows"),l.a.createElement("p",null,"Instructions"),l.a.createElement("h3",null,"Mac"),l.a.createElement("p",null,"Instructions"),l.a.createElement("h3",null,"Linux"),l.a.createElement("p",null,"Instructions"))))}}]),a}(n.Component);function k(e){var t=e.token,a=new Date;return null===t||"undefined"===t?l.a.createElement(w,{handleState:e.handleState,message:"Login to download game"}):a>new Date(1e3*f.a.decode(t).exp)?l.a.createElement(w,{handleState:e.handleState,message:"Session expired. Log in again"}):l.a.createElement(O,null)}var O=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"DownloadGame",value:function(){console.log("Starting download")}},{key:"render",value:function(){return l.a.createElement("div",{className:"box"},l.a.createElement("h2",null,"Hello, user!"),l.a.createElement("p",null,"You are logged in and can download the game from here."),l.a.createElement("p",null,"Just a dummy file, no need to install it :-)"),l.a.createElement("a",{className:"buttonLink",href:"http://mirrors.dotsrc.org/linuxmint-cd/stable/19.3/linuxmint-19.3-cinnamon-64bit.iso"},"Download Deep Flight"),l.a.createElement("p",null,"Size: 8 MB"))}}]),a}(l.a.Component),S=j,y=a(120),C=a.n(y),x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"boxwrapper longread"},l.a.createElement("div",{className:"box"},l.a.createElement("img",{src:C.a,width:"100%",alt:"deep flight screenshot",className:"headerimage"}),l.a.createElement("div",{className:"imageoverlay"},l.a.createElement("h1",null,"Deep Flight"),l.a.createElement("p",null,"Classic cave flier with an infinite number of caves")),l.a.createElement("h2",null,"Project"),l.a.createElement("p",null,"This page and the backend is made by ",l.a.createElement("b",null,"gruppe 0, DTU software, Backendudvikling, may 2020"),". "))))}}]),a}(n.Component),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(m.a,null,l.a.createElement("div",null,l.a.createElement("h1",{className:"header"},"DEEP FLIGHT"),l.a.createElement("ul",{className:"header"},l.a.createElement("li",null,l.a.createElement(m.b,{exact:!0,to:"/"},"High Scores")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/download"},"Download")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/about"},"About the game"))),l.a.createElement("div",{className:"content"},l.a.createElement(d.a,{exact:!0,path:"/",component:E}),l.a.createElement(d.a,{path:"/download",component:S}),l.a.createElement(d.a,{path:"/about",component:x}))))}}]),a}(n.Component);a(248);o.a.render(l.a.createElement(N,null),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.f6a3c7be.chunk.js.map